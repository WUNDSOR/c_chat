<!DOCTYPE html>
<html>
<head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://unpkg.com/vue@next"></script>
<style>
#app{
margin: 0 auto;
width: 900px;
display: flex;
justify-content:center
}
#input-preview{
margin-top: 100px;
margin-left: 50px;
}
#input-preview-box{
width: 400px;
height: 400px;
}
#input-box{
margin-top: 80px;
width: 240px;
}
.rule-select{
margin: 0 2px;
width: 90px;
}
label{ 
width: 100px;
}
</style>
</head>
<body>
<div id="app">
	<div id="input-box">
		<form @submit.prevent="addToList()">
			<label>
				<span>違規人：</span>
				<input v-model="myForm.userId" required>
			</label>
			<div>
				<label>
					<span>違規項目：</span>
					<select id="rule-option" class="rule-select" size="4" v-model="myForm.rule">
						<option v-for="rule in rules" :value="rule.type">{{rule.name}}</option>
					</select>
				</label>
				<label>
					<span>類別：</span>
					<select id="rule-sub-option" class="rule-select" size="4" v-model="myForm.subRule">
						<option v-for="subRule in subRules[myForm.rule]" :value="subRule.type">{{subRule.name}}</option>
					</select>
				</label>
			</div>
			<label>
				<span>累犯次數：</span>
				<input v-model="myForm.count" required><br>
			</label>
			<br>
			<label>
				<span>違規文章：</span>
				<input v-model="myForm.crimeEssay" required><br>
			</label>
			<br>
			<label>
				<span>檢舉文章：</span>
				<input v-model="myForm.reportEssay" required><br>
			</label>
			<br>
			<label>
				<span>違規事證：</span>
				<input v-model="myForm.evidence" required><br>
			</label>
			<br><br>
			<input type = "submit" class="btn btn-primary" value="提交">
		</form>
	</div>
	<div id="input-preview">
		<textarea id="input-preview-box" v-model="outcome"></textarea>
		<br>
		<button class="btn btn-primary" @click="copyResult()">複製結果</button>
	</div>
</div>
</body>
<script>
const { reactive, ref } = Vue;
const app = {
	setup(){
		// 板規
		const rules = [
			{type : 0, name : '4-1'},
			{type : 1, name : '4-5'},
			{type : 2, name : '4-7'},
			{type : 3, name : '4-11'}
		]
		// 板規子項目
		const subRules = [
			[{type : 0, name : '3D', day : 3}],
			[{type : 0, name : '7D', day : 7}],
			[{type : 0, name : '30D', day : 30}],
			[{type : 0, name : '30D', day : 30}, {type : 1, name : '60D', day : 60}]
		]

		const msg = ref('dd')
		// 表單
		const myForm = reactive({
			userId : '',
			rule : 0,
			subRule: 0,
			count : 0,
			crimeEssay : '',
			reportEssay : '',
			evidence : ''
		})
		const outcome = ref('')

		// 輸出違規項目
		function addToList() {
			outcome.value +=
			`
───────────────────
違規人  ： ${myForm.userId}
違規項目： ${rules[myForm.rule].name}${numberToText(myForm.count)} 
違規文章： ${myForm.crimeEssay}
檢舉文章： ${myForm.reportEssay}
罰則    ： 水桶 ${countBucketDay()}日
違規事證：
${myForm.evidence}
───────────────────`
		}

		// 數字轉中文字
		function numberToText (number) {
			if (number == 1)
				return '二犯'
			else if (number == 2)
				return '三犯'
			else if (number == 3)
				return '四犯'
			else if (number == 4)
				return '五犯'
			else if (number == 5)
				return '六犯'
			else if (number == 6)
				return '七犯'
			else
				return ''
		}
		// 計算水桶天數
		function countBucketDay (){
			return subRules[myForm.rule][myForm.subRule].day * (Number(myForm.count) + 1)
		}
		// 複製公告模版內容
		function copyResult() {
			navigator.clipboard.writeText(outcome.value)
		}

		return { 
			myForm,
			outcome,
			rules,
			subRules,
			addToList,
			copyResult
		}
	}
}
const myVue = Vue.createApp(app).mount("#app");
</script>
</html>

